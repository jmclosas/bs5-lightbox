{"version":3,"file":"index.js","mappings":"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","sources":["webpack://bs5-lightbox/webpack/universalModuleDefinition","webpack://bs5-lightbox/external umd \"bootstrap\"","webpack://bs5-lightbox/webpack/bootstrap","webpack://bs5-lightbox/webpack/runtime/compat get default export","webpack://bs5-lightbox/webpack/runtime/define property getters","webpack://bs5-lightbox/webpack/runtime/hasOwnProperty shorthand","webpack://bs5-lightbox/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"bootstrap\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Lightbox\", [\"bootstrap\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Lightbox\"] = factory(require(\"bootstrap\"));\n\telse\n\t\troot[\"Lightbox\"] = factory(root[\"bootstrap\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__988__) {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__988__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","/**\r\n * Lightbox for Bootstrap 5\r\n *\r\n * @file Creates a modal with a lightbox carousel.\r\n * @module bs5-lightbox\r\n */\r\n\r\nimport { Modal, Carousel } from 'bootstrap';\r\nconst bootstrap = {\r\n\tModal,\r\n\tCarousel\r\n};\r\nclass Lightbox {\r\n\tconstructor(el, options = {}) {\r\n\t\tthis.hash = this.randomHash();\r\n\t\tthis.settings = Object.assign(Object.assign(Object.assign({}, bootstrap.Modal.Default), bootstrap.Carousel.Default), {\r\n\t\t\tinterval: false,\r\n\t\t\ttarget: '[data-toggle=\"lightbox\"]',\r\n\t\t\tgallery: '',\r\n\t\t\tsize: 'xl',\r\n\t\t\tconstrain: true\r\n\t\t});\r\n\t\tthis.settings = Object.assign(Object.assign({}, this.settings), options);\r\n\t\tthis.modalOptions = (() => this.setOptionsFromSettings(bootstrap.Modal.Default))();\r\n\t\tthis.carouselOptions = (() => this.setOptionsFromSettings(bootstrap.Carousel.Default))();\r\n\t\tif (typeof el === 'string') {\r\n\t\t\tthis.settings.target = el;\r\n\t\t\tel = document.querySelector(this.settings.target);\r\n\t\t}\r\n\t\tthis.el = el;\r\n\t\tthis.type = el.dataset.type || '';\r\n\r\n\t\tthis.src = this.getSrc(el);\r\n\t\tthis.sources = this.getGalleryItems();\r\n\t\tthis.createCarousel();\r\n\t\tthis.createModal();\r\n\t\tthis.addEvents();\r\n\t}\r\n\tshow() {\r\n\t\tdocument.body.appendChild(this.modalElement);\r\n\t\tthis.modal.show();\r\n\t}\r\n\thide() {\r\n\t\tthis.modal.hide();\r\n\t}\r\n\tsetOptionsFromSettings(obj) {\r\n\t\treturn Object.keys(obj).reduce((p, c) => Object.assign(p, { [c]: this.settings[c] }), {});\r\n\t}\r\n\tgetSrc(el) {\r\n\t\tlet src = el.dataset.src || el.dataset.remote || el.href || 'http://via.placeholder.com/1600x900';\r\n\t\tif (el.dataset.type === 'html') {\r\n\t\t\treturn src;\r\n\t\t}\r\n\t\tif (!/\\:\\/\\//.test(src)) {\r\n\t\t\tsrc = window.location.origin + src;\r\n\t\t}\r\n\t\tconst url = new URL(src);\r\n\t\tif (el.dataset.footer || el.dataset.caption) {\r\n\t\t\turl.searchParams.set('caption', el.dataset.footer || el.dataset.caption);\r\n\t\t}\r\n\t\treturn url.toString();\r\n\t}\r\n\tgetGalleryItems() {\r\n\t\tlet galleryTarget;\r\n\t\tif (this.settings.gallery) {\r\n\t\t\tif (Array.isArray(this.settings.gallery)) {\r\n\t\t\t\treturn this.settings.gallery;\r\n\t\t\t}\r\n\t\t\tgalleryTarget = this.settings.gallery;\r\n\t\t} else if (this.el.dataset.gallery) {\r\n\t\t\tgalleryTarget = this.el.dataset.gallery;\r\n\t\t}\r\n\t\tconst gallery = galleryTarget\r\n\t\t\t? [...new Set(Array.from(document.querySelectorAll(`[data-gallery=\"${galleryTarget}\"]`), (v) => `${v.dataset.type ? v.dataset.type : ''}${this.getSrc(v)}`))]\r\n\t\t\t: [`${this.type ? this.type : ''}${this.src}`];\r\n\t\treturn gallery;\r\n\t}\r\n\tgetYoutubeId(src) {\r\n\t\tif (!src) return false;\r\n\t\tconst matches = src.match(/^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/);\r\n\t\treturn matches && matches[2].length === 11 ? matches[2] : false;\r\n\t}\r\n\tgetYoutubeLink(src) {\r\n\t\tconst youtubeId = this.getYoutubeId(src);\r\n\t\tif (!youtubeId) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst arr = src.split('?');\r\n\t\tlet params = arr.length > 1 ? '?' + arr[1] : '';\r\n\t\t\r\n\t\treturn `https://www.youtube.com/embed/${youtubeId}${params}`;\r\n\t}\r\n\tgetInstagramEmbed(src) {\r\n\t\tif (/instagram/.test(src)) {\r\n\t\t\tsrc += /\\/embed$/.test(src) ? '' : '/embed';\r\n\t\t\treturn `<iframe src=\"${src}\" class=\"start-50 translate-middle-x\" style=\"max-width: 500px\" frameborder=\"0\" scrolling=\"no\" allowtransparency=\"true\"></iframe>`;\r\n\t\t}\r\n\t}\r\n\tisEmbed(src) {\r\n\t\tconst regex = new RegExp('(' + Lightbox.allowedEmbedTypes.join('|') + ')');\r\n\t\tconst isEmbed = regex.test(src);\r\n\t\tconst isImg = /\\.(png|jpe?g|gif|svg|webp)/i.test(src) || this.el.dataset.type === 'image';\r\n\r\n\t\treturn isEmbed || !isImg;\r\n\t}\r\n\tcreateCarousel() {\r\n\t\tconst template = document.createElement('template');\r\n\t\tconst types = Lightbox.allowedMediaTypes.join('|');\r\n\t\tconst slidesHtml = this.sources\r\n\t\t\t.map((src, i) => {\r\n\t\t\t\tsrc = src.replace(/\\/$/, '');\r\n\t\t\t\tconst regex = new RegExp(`^(${types})`, 'i');\r\n\t\t\t\tconst isHtml = /^html/.test(src);\r\n\t\t\t\tconst isForcedImage = /^image/.test(src);\r\n\r\n\t\t\t\tif (regex.test(src)) {\r\n\t\t\t\t\tsrc = src.replace(regex, '');\r\n\t\t\t\t}\r\n\t\t\t\tconst imgClasses = this.settings.constrain ? 'mw-100 mh-100 h-auto w-auto m-auto top-0 end-0 bottom-0 start-0' : 'h-100 w-100';\r\n\t\t\t\tconst params = new URLSearchParams(src.split('?')[1]);\r\n\t\t\t\tlet caption = '';\r\n\t\t\t\tlet url = src;\r\n\t\t\t\tif (params.get('caption')) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\turl = new URL(src);\r\n\t\t\t\t\t\turl.searchParams.delete('caption');\r\n\t\t\t\t\t\turl = url.toString();\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\turl = src;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcaption = `<p class=\"lightbox-caption m-0 p-2 text-center text-white small\"><em>${params.get('caption')}</em></p>`;\r\n\t\t\t\t}\r\n\t\t\t\tlet inner = `<img src=\"${url}\" class=\"d-block ${imgClasses} img-fluid\" style=\"z-index: 1; object-fit: contain;\" />`;\r\n\t\t\t\tlet attributes = '';\r\n\t\t\t\tconst instagramEmbed = this.getInstagramEmbed(src);\r\n\t\t\t\tconst youtubeLink = this.getYoutubeLink(src);\r\n\t\t\t\tif (this.isEmbed(src) && !isForcedImage) {\r\n\t\t\t\t\tif (youtubeLink) {\r\n\t\t\t\t\t\tsrc = youtubeLink;\r\n\t\t\t\t\t\tattributes = 'title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer autoplay clipboard-write encrypted-media gyroscope picture-in-picture\"';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinner = instagramEmbed || `<iframe src=\"${src}\" ${attributes} allowfullscreen></iframe>`;\r\n\t\t\t\t}\r\n\t\t\t\tif (isHtml) {\r\n\t\t\t\t\tinner = src;\r\n\t\t\t\t}\r\n\t\t\t\tconst spinner = `<div class=\"position-absolute top-50 start-50 translate-middle text-white\"><div class=\"spinner-border\" style=\"width: 3rem height: 3rem\" role=\"status\"></div></div>`;\r\n\t\t\t\treturn `\r\n\t\t\t\t<div class=\"carousel-item ${!i ? 'active' : ''}\" style=\"min-height: 100px\">\r\n\t\t\t\t\t${spinner}\r\n\t\t\t\t\t<div class=\"ratio ratio-16x9\" style=\"background-color: #f4e029;\">${inner}</div>\r\n\t\t\t\t\t${caption}\r\n\t\t\t\t</div>`;\r\n\t\t\t})\r\n\t\t\t.join('');\r\n\t\tconst controlsHtml =\r\n\t\t\tthis.sources.length < 2\r\n\t\t\t\t? ''\r\n\t\t\t\t: `\r\n\t\t\t<button id=\"#lightboxCarousel-${this.hash}-prev\" class=\"carousel-control carousel-control-prev h-75 m-auto\" type=\"button\" data-bs-target=\"#lightboxCarousel-${this.hash}\" data-bs-slide=\"prev\">\r\n\t\t\t\t<span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t\t<span class=\"visually-hidden\">Previous</span>\r\n\t\t\t</button>\r\n\t\t\t<button id=\"#lightboxCarousel-${this.hash}-next\" class=\"carousel-control carousel-control-next h-75 m-auto\" type=\"button\" data-bs-target=\"#lightboxCarousel-${this.hash}\" data-bs-slide=\"next\">\r\n\t\t\t\t<span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t\t<span class=\"visually-hidden\">Next</span>\r\n\t\t\t</button>`;\r\n\t\tlet classes = 'lightbox-carousel carousel slide';\r\n\t\tif (this.settings.size === 'fullscreen') {\r\n\t\t\tclasses += ' position-absolute w-100 translate-middle top-50 start-50';\r\n\t\t}\r\n\t\tconst html = `\r\n\t\t\t<div id=\"lightboxCarousel-${this.hash}\" class=\"${classes}\" data-bs-ride=\"carousel\" data-bs-interval=\"${this.carouselOptions.interval}\">\r\n\t\t\t\t<div class=\"carousel-inner\">\r\n\t\t\t\t\t${slidesHtml}\r\n\t\t\t\t</div>\r\n\t\t\t\t${controlsHtml}\r\n\t\t\t</div>`;\r\n\t\ttemplate.innerHTML = html.trim();\r\n\t\tthis.carouselElement = template.content.firstChild;\r\n\t\tconst carouselOptions = Object.assign(Object.assign({}, this.carouselOptions), { keyboard: false });\r\n\t\tthis.carousel = new bootstrap.Carousel(this.carouselElement, carouselOptions);\r\n\t\tconst elSrc = this.type && this.type !== 'image' ? this.type + this.src : this.src;\r\n\t\tthis.carousel.to(this.findGalleryItemIndex(this.sources, elSrc));\r\n\t\tif (this.carouselOptions.keyboard === true) {\r\n\t\t\tdocument.addEventListener('keydown', (e) => {\r\n\t\t\t\tif (e.code === 'ArrowLeft') {\r\n\t\t\t\t\tconst prev = document.getElementById(`#lightboxCarousel-${this.hash}-prev`);\r\n\t\t\t\t\tif (prev) {\r\n\t\t\t\t\t\tprev.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (e.code === 'ArrowRight') {\r\n\t\t\t\t\tconst next = document.getElementById(`#lightboxCarousel-${this.hash}-next`);\r\n\t\t\t\t\tif (next) {\r\n\t\t\t\t\t\tnext.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this.carousel;\r\n\t}\r\n\tfindGalleryItemIndex(haystack, needle) {\r\n\t\tlet index = 0;\r\n\t\tfor (const item of haystack) {\r\n\t\t\tif (item.includes(needle)) {\r\n\t\t\t\treturn index;\r\n\t\t\t}\r\n\t\t\tindex++;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\tcreateModal() {\r\n\t\tconst template = document.createElement('template');\r\n\t\tconst btnInner =\r\n\t\t\t'<svg xmlns=\"http://www.w3.org/2000/svg\" style=\"position: relative; top: -5px;\" viewBox=\"0 0 16 16\" fill=\"#3a64a6\"><path d=\"M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z\"/></svg>';\r\n\t\tconst html = `\r\n\t\t\t<div class=\"modal lightbox fade\" id=\"lightboxModal-${this.hash}\" tabindex=\"-1\" aria-hidden=\"true\">\r\n\t\t\t\t<div class=\"modal-dialog modal-dialog-centered modal-${this.settings.size}\">\r\n\t\t\t\t\t<div class=\"modal-content border-0 bg-transparent\">\r\n\t\t\t\t\t\t<div class=\"modal-body p-0\">\r\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn-close position-absolute top-0 end-0 p-3\" data-bs-dismiss=\"modal\" aria-label=\"Close\" style=\"z-index: 2; background: none;\">${btnInner}</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"user-area\" style=\"background:#f4e029; padding-left:20px; padding-bottom:10px; position:relative; top:-10px; \">\r\n\t\t\t\t\t\t\t<i class=\"bi ${this.el.firstElementChild.dataset.heart} grim-heart\" data-heart-id=\"${this.el.firstElementChild.dataset.id}\"></i>\r\n  \t          <span class=\"love\" data-storie-id=\"${this.el.firstElementChild.dataset.id}\">J\\'aime <span class=\"love-count\" data-count=\"${this.el.firstElementChild.dataset.count}\">${this.el.firstElementChild.dataset.count}</span></span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>`;\r\n\t\ttemplate.innerHTML = html.trim();\r\n\t\tthis.modalElement = template.content.firstChild;\r\n\t\tthis.modalElement.querySelector('.modal-body').appendChild(this.carouselElement);\r\n\t\tthis.modalElement.addEventListener('hidden.bs.modal', () => this.modalElement.remove());\r\n\t\tthis.modalElement.querySelector('[data-bs-dismiss]').addEventListener('click', () => this.modal.hide());\r\n\t\tthis.modal = new bootstrap.Modal(this.modalElement, this.modalOptions);\r\n\t\treturn this.modal;\r\n\t}\r\n\taddEvents() {\r\n\t\tthis.modalElement.querySelector('.grim-heart').addEventListener('click', this.settings.grimbook.setGrimHeart.bind(this.settings.grimbook));\r\n\t\t//this.modalElement.querySelector('.love').addEventListener('click', this.settings.grimbook.showGrimHearts.bind(this.settings.grimbook));\r\n\t}\r\n\trandomHash(length = 8) {\r\n\t\treturn Array.from({ length }, () => Math.floor(Math.random() * 36).toString(36)).join('');\r\n\t}\r\n}\r\nLightbox.allowedEmbedTypes = ['embed', 'youtube', 'vimeo', 'instagram', 'url'];\r\nLightbox.allowedMediaTypes = [...Lightbox.allowedEmbedTypes, 'image', 'html'];\r\nLightbox.defaultSelector = '[data-toggle=\"lightbox\"]';\r\nLightbox.initialize = function (e) {\r\n\te.preventDefault();\r\n\tconst lightbox = new Lightbox(this);\r\n\tlightbox.show();\r\n};\r\ndocument.querySelectorAll(Lightbox.defaultSelector).forEach((el) => el.addEventListener('click', Lightbox.initialize));\r\nif (typeof window !== 'undefined' && window.bootstrap) {\r\n\twindow.bootstrap.Lightbox = Lightbox;\r\n}\r\nexport default Lightbox;\r\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__988__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","bootstrap","Modal","Carousel","Lightbox","constructor","el","options","this","hash","randomHash","settings","assign","Default","interval","target","gallery","size","constrain","modalOptions","setOptionsFromSettings","carouselOptions","document","querySelector","type","dataset","src","getSrc","sources","getGalleryItems","createCarousel","createModal","addEvents","show","body","appendChild","modalElement","modal","hide","keys","reduce","p","c","remote","href","test","window","location","origin","url","URL","footer","caption","searchParams","set","toString","galleryTarget","Array","isArray","Set","from","querySelectorAll","v","getYoutubeId","matches","match","length","getYoutubeLink","youtubeId","arr","split","getInstagramEmbed","isEmbed","RegExp","allowedEmbedTypes","join","isImg","template","createElement","types","allowedMediaTypes","slidesHtml","map","i","replace","regex","isHtml","isForcedImage","imgClasses","params","URLSearchParams","delete","e","inner","attributes","instagramEmbed","youtubeLink","controlsHtml","classes","html","innerHTML","trim","carouselElement","content","firstChild","keyboard","carousel","elSrc","to","findGalleryItemIndex","addEventListener","code","prev","getElementById","click","next","haystack","needle","index","item","includes","firstElementChild","heart","id","count","remove","grimbook","setGrimHeart","bind","Math","floor","random","defaultSelector","initialize","preventDefault","forEach"],"sourceRoot":""}